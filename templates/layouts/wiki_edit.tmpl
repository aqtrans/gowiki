{{ define "title" }}Editing {{ .Wiki.Title }}{{ end }}

{{ define "content" }}
<link rel="stylesheet" href="/assets/css/tagdog.css">

    <main>
        <ul class="tabs">
            <li class="tabs-title"><a href="/{{.Wiki.Filename}}">{{svg "file-text2"}} View</a></li>
            <li class="tabs-title is-active"><a href="#">{{svg "pencil"}} Edit</a></li>
            <li class="tabs-title"><a href="/history/{{.Wiki.Filename}}">{{svg "history"}} History</a></li>
        </ul>    
        <form action="/save/{{.Wiki.Filename}}" method="POST" id="savewiki">
        Title:<input type="text" name="title" value="{{.Wiki.Frontmatter.Title}}"><br>
        {{ if .Wiki.Frontmatter.Favorite }}
            Favorite:<input id="favorite" type="checkbox" name="favorite" checked>
        {{ else }}
            Favorite:<input id="favorite" type="checkbox" name="favorite">
            </input>
        {{ end }}
        <br>
        Permission:
        <select id="permission" name="permission">
            {{ if eq .Wiki.Frontmatter.Permission "admin" }}
            <option value="admin" selected>Admin</option>
            <option value="private">Private</option>
            <option value="public">Public</option>
            {{ else if eq .Wiki.Frontmatter.Permission "private" }}
            <option value="admin">Admin</option>
            <option value="private" selected>Private</option>
            <option value="public">Public</option>
            {{ else if eq .Wiki.Frontmatter.Permission "public" }}
            <option value="admin">Admin</option>
            <option value="private">Private</option>
            <option value="public" selected>Public</option>
            {{ else }}
            <option value="admin">Admin</option>
            <option value="private">Private</option>
            <option value="public">Public</option>
            {{ end }}
        </select>
        <br>
        <div class="tag-field">
            Tags:
            <input type="text" id="tags" name="tags" placeholder="Separate tags with commas" value="{{ .Wiki.Frontmatter.Tags|jsTags }}" />
        </div>
        {{.Token}}
        <hr>
        <!--<ul class="tabs sub" id="subtabs">
            <li class="tab-title"><a class="tablinks is-active" id="edit-tab">Edit</a></li>
            <li class="tab-title"><a class="tablinks" id="preview-tab">Preview</a></li>
            <li class="tab-title"><a class="tablinks" id="help-tab">Help</a></li>
        </ul>-->
        <div id="tabs">
        <ul class="tabs sub">
        <li class="tab-title"
            v-for="tab in tabs"
            v-bind:key="tab.name"
            v-bind:class="['tab-button', { active: currentTab.name === tab.name }]"
            v-on:click="currentTab = tab"
        ><a class="tablinks">${ tab.name }</a></li>
        </ul>

        <component
            v-bind:is="currentTab.component"
            class="tab"
        ></component>
        </div>

        <div id="tab-content">
        <div id="Edit" class="tabcontent">
            <textarea name="editor" id="wikieditor" @input="update" :value="input">{{printf "%s" .Wiki.Content}}</textarea>
        </div>
        <div id="Preview" class="tabcontent">
            <div>
                <div v-html="compiledMarkdown"></div>
                <!--<article class="content" id="preview_content" v-html="compiledMarkdown"></article>-->
            </div>
        </div>
        <div id="Help" class="tabcontent">
            <div>
            <h2>Markdown Cheatsheet:</h2>
<pre><code>
Headings:
# Header
## Subheader

Text:
*italics*
**bold**
~~strikeout~~
super^script^
sub~script~
> quotation

Links:
[Title](http://google.com)
[Local Wiki Page]()
[/Local Wiki Page]()

Code:
```
some code
```
` one-line-code `
</code></pre>
            </div>
        </div>        
        <button type="submit" class="success button">Save</button>
        </form>
        <br>
        <form action="/delete/{{.Wiki.Filename}}" method="POST" id="deletewiki">
            {{.Token}}
            <button type="submit" class="delete button">Delete File</button>
        </form>
    </main>

{{ end }}
{{ define "extra_scripts" }}
<!--<script src="/assets/js/vuetabs.js"></script>-->
<script src="/assets/js/prevue.js"></script>
<!--<script src="/assets/js/jquery.min.js"></script>
<script src="/assets/js/tagdog.min.js"></script>
<script src="/assets/js/tags.js"></script>-->
{{ end }}