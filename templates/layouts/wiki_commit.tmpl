{{ define "title" }}{{ .Wiki.Title }} ({{.Commit}}){{ end }}

{{ define "content" }}
<main>
  <ul class="tabs">
    <li class="tabs-title is-active"><a href="#">{{ svg "file-text2" }} View</a></li>
    <li class="tabs-title"><a href="/{{.Wiki.Filename}}">{{ svg "file-text2" }} View page @ HEAD</a></li>
    <li class="tabs-title"><a href="/history/{{.Wiki.Filename}}">{{ svg "history" }} History</a></li>
  </ul>
  <ul class="preview-tabs">
    <li class="tab-title"><a class="tablinks" onclick="openTab(event, 'Content')" id="defaultOpen">Content</a></li>
    <li class="tab-title"><a class="tablinks" onclick="openTab(event, 'Diff')">Diff</a></li>
  </ul>
  <div id="Content" class="tabcontent">
    <div>
      {{.Rendered | safeHTML}}
    </div>
  </div>
  <div id="Diff" class="tabcontent">
    <div>
      <pre><code>{{.Diff}}</code></pre>
    </div>
  </div>
  <footer>
    <ul class="frontmatter">
      <li><p>Filename</p>
      <div class="stat">{{ .Wiki.Filename }}</div></li>
      <li><p>Permission</p>
      <div class="stat">{{ .Wiki.Frontmatter.Permission }}</div></li>
      <li><p>Favorite</p>
      <div class="stat">{{ if .Wiki.Frontmatter.Favorite }}{{svg "star-full"}}{{ else  }}{{svg "star-empty"}}{{ end }}</div></li>
      {{ if .Wiki.Frontmatter.Tags }}
      <li><p>Tags</p>
      <div class="stat">
      <ul class="tags">
      {{ range .Wiki.Frontmatter.Tags }}<li>{{ . }}</li>{{ end }}
      </ul>
      </div></li>
      {{ end }}
    </ul>
    <ul>
      <li>Created: {{ .Wiki.CreateTime | prettyDate }}</li>
      <li>Last Modified: {{ .Wiki.ModTime | prettyDate }}</li>
    </ul>
  </footer>
</main>
{{ end }}
{{ define "extra_scripts" }}
<script type="text/javascript" charset="utf-8">
function openTab(evt, tabName) {
    // Declare all variables
    var i, tabcontent, tablinks;

    // Get all elements with class="tabcontent" and hide them
    tabcontent = document.getElementsByClassName("tabcontent");
    for (i = 0; i < tabcontent.length; i++) {
        tabcontent[i].style.display = "none";
    }

    // Get all elements with class="tablinks" and remove the class "active"
    tablinks = document.getElementsByClassName("tablinks");
    for (i = 0; i < tablinks.length; i++) {
        tablinks[i].className = tablinks[i].className.replace(" is-active", "");
    }

    // Show the current tab, and add an "active" class to the button that opened the tab
    document.getElementById(tabName).style.display = "block";
    evt.currentTarget.className += " is-active";
}  
document.getElementById("defaultOpen").click();
</script>
{{ end }}